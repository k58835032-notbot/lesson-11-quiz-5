<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Kana Audio Quiz with GIFs & Retry</title>
<style>
body {
  font-family:"Hiragino Kaku Gothic Pro","Meiryo",sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:40px;
  color:#333;
  text-align:center;
}
h1 {color:#b23b3b;font-size:2em;margin-bottom:20px;}
button {font-size:18px;padding:12px 24px;margin:10px;border-radius:12px;cursor:pointer;transition:.3s;}
#playSound {background:white;color:#b23b3b;border:3px solid #b23b3b;}
#playSound:hover {background:#ffe6f2;}
.choice {background:#b23b3b;color:white;border:2px solid #b23b3b;}
.choice:hover {background:#ff4da6;}
#result {font-size:20px;margin-top:20px;font-weight:bold;}
#gif {margin-top:20px;max-width:250px;border-radius:12px;}
#retry {display:none;background:#4caf50;color:white;border:2px solid #4caf50;}
#retry:hover {background:#66bb6a;}
</style>
</head>
<body>
<h1>üéß Kana Listening Quiz</h1>
<button id="playSound">‚ñ∂Ô∏è Play Sound</button>
<div id="choices"></div>
<div id="result"></div>
<img id="gif" src="" alt="" />
<button id="retry">üîÑ Retry Quiz</button>

<audio id="„Çâ" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ra.mp3"></audio>
<audio id="„Çä" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ri.mp3"></audio>
<audio id="„Çã" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ru.mp3"></audio>
<audio id="„Çå" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/re.mp3"></audio>
<audio id="„Çç" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ro.mp3"></audio>
<audio id="„ÇÑ" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ya.mp3"></audio>
<audio id="„ÇÜ" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/yu.mp3"></audio>
<audio id="„Çà" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/yo.mp3"></audio>
<audio id="„Çä„ÇÉ" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/rya.mp3"></audio>
<audio id="„Çä„ÇÖ" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ryu.mp3"></audio>
<audio id="„Çä„Çá" src="https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/ryo.mp3"></audio>

<script>
const sounds = ["„Çâ","„Çä","„Çã","„Çå","„Çç","„ÇÑ","„ÇÜ","„Çà","„Çä„ÇÉ","„Çä„ÇÖ","„Çä„Çá"];
let currentKana = "";
let questionCount = 0;
let score = 0;
const maxQuestions = 25;

function newQuestion() {
  if(questionCount >= maxQuestions) return endQuiz();
  questionCount++;
  currentKana = sounds[Math.floor(Math.random() * sounds.length)];

  const choicesDiv = document.getElementById('choices');
  choicesDiv.innerHTML = '';

  const options = new Set([currentKana]);
  while(options.size < 4) options.add(sounds[Math.floor(Math.random() * sounds.length)]);

  [...options].sort(()=>0.5-Math.random()).forEach(kana=>{
    const btn = document.createElement('button');
    btn.className='choice';
    btn.textContent=kana;
    btn.onclick = ()=>checkAnswer(kana);
    choicesDiv.appendChild(btn);
  });

  document.getElementById('result').textContent = `Q ${questionCount} / ${maxQuestions} ‚Äî Keep going! üí™`;
}

function playCurrentSound() {
  const audio = document.getElementById(currentKana);
  if(audio) audio.play();
}

function checkAnswer(answer){
  const result = document.getElementById('result');
  if(answer===currentKana){
    score++;
    const messages = ["Great job! üåü","Awesome! ‚úÖ","You're doing amazing! üí™","Perfect! üéØ","Keep it up! üöÄ"];
    result.textContent = `‚≠ï ${messages[Math.floor(Math.random()*messages.length)]} (${questionCount}/${maxQuestions})`;
  } else {
    result.textContent = `‚ùå Wrong! Correct: ${currentKana} ‚Äî Keep trying! (${questionCount}/${maxQuestions})`;
  }
  setTimeout(newQuestion, 1200);
}

function endQuiz(){
  document.getElementById('choices').innerHTML='';
  const mEl = document.getElementById('result');
  const gifEl = document.getElementById('gif');
  const retryBtn = document.getElementById('retry');
  let text="", gif="";
  if(score>=21){
    text="üåü Perfect Score! You're a kana master! üåü";
    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cool%20cute%20cat.gif";
  } else if(score>=12){
    text="üëç Excellent work! Keep practicing!";
    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cute%20cat%20walking.gif";
  } else {
    text="üå± Don‚Äôt worry ‚Äî practice makes perfect!";
    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/sad%20cute%20cat.gif";
  }
  mEl.textContent = `${text} Score: ${score} / ${maxQuestions}`;
  gifEl.src = gif;
  document.getElementById('playSound').disabled = true;
  retryBtn.style.display = "inline-block";
}

function resetQuiz(){
  score = 0;
  questionCount = 0;
  document.getElementById('playSound').disabled = false;
  document.getElementById('gif').src = "";
  document.getElementById('retry').style.display = "none";
  document.getElementById('result').textContent = "Quiz restarted! üéØ";
  newQuestion();
}

document.getElementById('playSound').addEventListener('click', playCurrentSound);
document.getElementById('retry').addEventListener('click', resetQuiz);

newQuestion();
</script>
</body>
</html>

